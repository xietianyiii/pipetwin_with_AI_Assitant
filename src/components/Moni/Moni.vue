<template>
  <div class="drainage-container">
    <div class="header">
      <img src="@/assets/pngs/top.png" alt="顶部图片" class="top-image" />
      <div class="header-text">昆山市排水防涝管理平台</div>
    </div>

    <div class="sidebar">
      <div class="sidebar-left">
        <div class="cards-left-wrapper">
          <!-- 防汛预报 -->
          <div class="card card-1">
            <div class="card-header">
              <svg
                t="1759140862845"
                class="card-header-icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="31836"
                width="14"
                height="12"
              >
                <path
                  d="M0 355.388235h355.388235V0H0v355.388235zM668.611765 0v355.388235H1024V0H668.611765zM0 1024h355.388235V668.611765H0V1024z m668.611765 0H1024V668.611765H668.611765V1024z"
                  fill="#1ebdd0"
                  p-id="31837"
                ></path>
              </svg>
              防汛预报
            </div>
            <div class="card1-content">
              <div class="card1-content-left">
                <div class="card1-content-left-svg-container">
                  <svg
                    t="1760346822896"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="52516"
                    width="80"
                    height="80"
                  >
                    <path
                      d="M266.89536 901.71392c-39.2192 0-122.55232-24.51456-122.55232-107.84768V269.34272c0-102.94272 63.72352-147.06688 122.55232-147.06688h426.48576c73.53344 0 122.55232 49.01888 122.55232 127.45728v251.01312c0 14.70464-9.79968 34.31424-29.40928 34.31424-24.51456-4.90496-34.31424-14.70464-34.31424-34.31424V254.63808a73.728 73.728 0 0 0-68.608-73.53344H271.80032c-29.40928 0-63.72352 29.40928-68.608 93.184v490.20928c0 73.53344 49.01888 73.53344 68.608 73.53344l212.0704 0.64512c19.6096-4.90496 29.40928 14.70464 29.40928 29.40928s-9.79968 34.31424-29.40928 34.31424l-216.97536-0.64512z"
                      fill="#ff6b6b"
                      p-id="52517"
                    ></path>
                    <path
                      d="M311.74656 635.136a16.60928 16.60928 0 0 1-6.06208-22.60992l22.0672-38.22592a16.54784 16.54784 0 1 1 28.672 16.54784l-22.0672 38.22592a16.60928 16.60928 0 0 1-22.60992 6.06208z m55.15264 38.22592a16.60928 16.60928 0 0 1-6.06208-22.60992l44.14464-76.45184a16.54784 16.54784 0 1 1 28.672 16.54784l-44.14464 76.45184a16.59904 16.59904 0 0 1-22.60992 6.06208z m99.328-38.22592a16.59904 16.59904 0 0 1-6.06208-22.60992l22.0672-38.22592a16.54784 16.54784 0 0 1 28.672 16.54784l-22.0672 38.22592a16.60928 16.60928 0 0 1-22.59968 6.06208z m60.71296 28.672a16.60928 16.60928 0 0 1-6.06208-22.60992l38.62528-66.89792a16.54784 16.54784 0 1 1 28.672 16.54784l-38.62528 66.89792a16.59904 16.59904 0 0 1-22.62016 6.05184z"
                      fill="#ff6b6b"
                      p-id="52518"
                    ></path>
                    <path
                      d="M474.5216 290.16064a126.89408 126.89408 0 0 0-123.904 99.7376 77.2608 77.2608 0 0 0 8.04864 154.07104h231.7312a88.2688 88.2688 0 0 0 0.96256-176.51712 126.976 126.976 0 0 0-116.8384-77.29152z"
                      fill="#ff6b6b"
                      p-id="52519"
                    ></path>
                    <path
                      d="M783.89248 606.84288l149.88288 245.248a34.816 34.816 0 0 1-29.696 52.98176H604.28288a34.816 34.816 0 0 1-29.696-52.98176l149.9136-245.23776a34.816 34.816 0 0 1 57.53856-2.73408l1.85344 2.72384z m121.57952 262.5536l-149.88288-245.248-0.26624-0.28672-0.31744-0.23552a1.65888 1.65888 0 0 0-2.27328 0.54272L602.89024 869.376a1.65888 1.65888 0 0 0 1.41312 2.53952h299.776a1.65888 1.65888 0 0 0 1.41312-2.51904z"
                      fill="#ff6b6b"
                      p-id="52520"
                    ></path>
                    <path
                      d="M754.176 689.5104a23.16288 23.16288 0 0 1 23.10144 24.80128l-5.33504 74.752a17.80736 17.80736 0 0 1-35.52256 0l-5.33504-74.752a23.16288 23.16288 0 0 1 23.10144-24.80128z"
                      fill="#ff6b6b"
                      p-id="52521"
                    ></path>
                    <path
                      d="M737.59744 838.74816a16.57856 16.57856 0 1 0 16.57856-16.57856 16.57856 16.57856 0 0 0-16.57856 16.57856z"
                      fill="#ff6b6b"
                      p-id="52522"
                    ></path>
                  </svg>
                </div>

                <div class="card1-content-text">暴雨预警</div>
              </div>

              <div class="card1-content-right">
                <div class="card1-content-right-svg-container">
                  <svg
                    t="1760348648996"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="60388"
                    width="70"
                    height="77"
                  >
                    <path
                      d="M512 25.856c265.984 0 480 213.952 480 480 0 265.984-214.016 480-480 480a478.848 478.848 0 0 1-480-480c0-266.048 214.016-480 480-480z m111.424 723.2H400.64a19.968 19.968 0 1 0 0 40H623.36a20.032 20.032 0 1 0 0-40z m0-64H400.64a19.968 19.968 0 1 0 0 40H623.36a20.032 20.032 0 1 0 0-40z m65.728-536L334.848 417.6H474.24l-139.392 268.608 354.304-268.608H549.76l139.392-268.544z"
                      fill="#ff6b6b"
                      p-id="60389"
                    ></path>
                  </svg>
                </div>

                <div class="card1-content-text">二级响应</div>
              </div>
            </div>
          </div>

          <!-- 雨量监测 -->
          <div class="card card-2">
            <div class="card-header card2-header">
              <div class="card2-header-left">
                <svg
                  t="1759140862845"
                  class="card-header-icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="31836"
                  width="14"
                  height="12"
                >
                  <path
                    d="M0 355.388235h355.388235V0H0v355.388235zM668.611765 0v355.388235H1024V0H668.611765zM0 1024h355.388235V668.611765H0V1024z m668.611765 0H1024V668.611765H668.611765V1024z"
                    fill="#1ebdd0"
                    p-id="31837"
                  ></path>
                </svg>
                <button class="card2-title-button" @click="onCreatePoiClick">
                  雨量监测
                </button>
              </div>

              <div class="card2-header-middle" @click="onEqualRainClick">
                <button class="isoline-button">等雨量图</button>
              </div>

              <div class="card2-header-right">
                <button
                  class="card2-close-button"
                  @click="onCloseCard2"
                  v-show="isMoniCard2CloseButtonVisible"
                >
                  ✕
                </button>
              </div>
            </div>
            <div class="card2-content">
              <div class="card2-left-content">
                <div class="card2-rain-card-container">
                  <div class="card2-rain-svg-container">
                    <svg
                      t="1760349723084"
                      class="cloud"
                      viewBox="0 0 1024 1024"
                      version="1.1"
                      xmlns="http://www.w3.org/2000/svg"
                      p-id="62578"
                      width="60"
                      height="60"
                    >
                      <path
                        d="M170.52358782 450.49182638c-89.78779367 7.77689552-157.65888181 83.42487916-156.95189131 173.21267284 0.7069905 89.78779367 69.99205964 164.02179632 159.77985331 171.09170135v2.12097148l663.15709032-1.41398099c97.56468919-10.60485751 172.50568234-91.90876518 173.91966335-190.18044487-0.7069905-79.18293616-50.1963256-150.5889768-125.13731875-178.16160636v-14.13981003c0-140.69110977-117.36042323-254.5165805-263.00046652-254.5165805-98.27167969-0.7069905-188.76646387 53.73127811-234.72084647 140.69110978-25.45165805-24.03767705-59.38720211-36.76350606-94.02973669-36.76350609-73.52701215-0.7069905-135.03518578 57.97322111-136.44916675 132.20722378 0 19.79573404 4.9489335 38.88447758 13.43281951 55.85224961z m0 0.70699051"
                        fill="#515151"
                        p-id="62579"
                      ></path>
                    </svg>
                  </div>
                  <div class="card2-rain-container">
                    <div class="card2-rain" ref="rainContainer"></div>
                  </div>
                </div>

                <div class="card2-left-label-wrapper">
                  <div class="card2-left-label-text2">当日平均雨量</div>
                  <div class="card2-left-label-number2">23.3mm</div>
                </div>
              </div>

              <div class="card2-right-content">
                <div class="card2-right-svg-container">
                  <svg
                    t="1760407665078"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="1136"
                    width="62"
                    height="72"
                  >
                    <path
                      d="M1018.346027 506.112L523.540693 64a17.066667 17.066667 0 0 0-22.954666 0L5.780693 506.112a17.066667 17.066667 0 0 0 11.52 29.866667h99.882667a17.066667 17.066667 0 0 1 17.066667 17.066666V947.2a17.066667 17.066667 0 0 0 17.066666 17.066667h721.066667a17.066667 17.066667 0 0 0 17.066667-17.066667v-394.325333a17.066667 17.066667 0 0 1 17.066666-17.066667H1006.996693a17.066667 17.066667 0 0 0 11.349334-29.696z m-480.469334 126.933333a96.469333 96.469333 0 0 1-192.896 0q0-52.864 96.469334-159.573333 96.469333 106.794667 96.426666 159.573333zM338.538027 396.8q51.456 53.376 51.456 79.786667c0 26.453333-23.04 47.872-51.456 47.872s-51.456-21.333333-51.456-47.872q0-26.325333 51.456-79.786667z m400.512 454.357333a172.245333 172.245333 0 0 0-21.333334-19.882666c-14.805333-11.434667-29.056-18.005333-39.893333-18.005334-7.381333 0-10.752 2.304-21.333333 14.805334-12.330667 14.293333-22.272 23.210667-34.688 27.733333v0.64h-1.877334a69.674667 69.674667 0 0 1-21.674666 2.986667 70.954667 70.954667 0 0 1-21.674667-2.986667h-6.229333v-2.432c-10.496-4.949333-19.456-13.354667-30.378667-25.941333s-14.037333-14.805333-21.333333-14.805334-10.709333 2.304-21.333334 14.805334c-19.157333 22.144-32.469333 31.402667-58.282666 31.402666s-39.082667-9.258667-58.24-31.402666c-10.752-12.501333-14.122667-14.805333-21.333334-14.805334a61.184 61.184 0 0 0-43.818666 20.522667l-2.56 2.816a390.481067 390.481067 0 0 0-15.744 15.402667l-35.2-31.274667q8.064-8.533333 16.554666-16.298667a101.632 101.632 0 0 1 20.437334-18.133333 104.490667 104.490667 0 0 1 60.330666-19.242667c25.856 0 39.125333 9.258667 58.24 31.402667 10.794667 12.501333 14.122667 14.805333 21.333334 14.805333s10.752-2.304 21.333333-14.805333c19.114667-22.144 32.384-31.402667 58.24-31.402667 22.869333 0 35.882667 7.253333 51.84 24.277334V396.8h51.456v76.8h77.141333v51.2h-77.525333v51.2h77.141333v51.2h-77.141333v51.2h77.141333v51.2h-77.141333v67.413333l1.706667-2.005333c17.066667-19.072 30.378667-27.136 54.485333-27.136a89.984 89.984 0 0 1 31.914667 6.144q24.874667 10.88 66.218666 48.384z"
                      p-id="1137"
                      fill="#515151"
                    ></path>
                  </svg>
                </div>
                <div class="card2-right-label-wrapper">
                  <div class="card2-right-label-text2">单站累计最大</div>
                  <div class="card2-right-label-number2">43.1mm</div>
                </div>
              </div>
            </div>
          </div>

          <!-- 水位监测 -->
          <div class="card card-3">
            <div class="card-header">
              <div class="card2-header">
                <div class="card2-header-left">
                  <svg
                    t="1759140862845"
                    class="card-header-icon water-monitoring-icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="31836"
                    width="14"
                    height="12"
                  >
                    <path
                      d="M0 355.388235h355.388235V0H0v355.388235zM668.611765 0v355.388235H1024V0H668.611765zM0 1024h355.388235V668.611765H0V1024z m668.611765 0H1024V668.611765H668.611765V1024z"
                      fill="#1ebdd0"
                      p-id="31837"
                    ></path>
                  </svg>
                  水位监测
                </div>
                <div class="card2-header-right">
                  <button
                    class="card2-close-button"
                    @click="onCloseCard3"
                    v-show="isMoniCard3CloseButtonVisible"
                  >
                    ✕
                  </button>
                </div>
              </div>
            </div>
            <div class="card3-content">
              <div class="card3-left-content">
                <div class="card3-svg-container1">
                  <svg
                    t="1760412334560"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="72204"
                    width="26"
                    height="26"
                  >
                    <path
                      d="M259.218286 109.714286a32.182857 32.182857 0 0 0-38.326857 24.868571l-156.818286 731.428572A32.475429 32.475429 0 0 0 87.771429 902.875429a26.331429 26.331429 0 0 0 6.729142 0A31.890286 31.890286 0 0 0 126.976 877.714286L283.794286 146.285714a32.182857 32.182857 0 0 0-24.576-36.571428zM767.122286 469.869714a32.182857 32.182857 0 0 0 31.305143 25.161143 29.257143 29.257143 0 0 0 7.021714 0 32.182857 32.182857 0 0 0 24.576-38.326857l-81.334857-321.828571a32.182857 32.182857 0 1 0-62.610286 13.750857zM484.790857 92.745143a32.182857 32.182857 0 0 0-32.182857 32.182857v104.448a32.182857 32.182857 0 1 0 64.365714 0V124.928a32.182857 32.182857 0 0 0-32.182857-32.182857zM484.790857 314.806857a32.182857 32.182857 0 0 0-32.182857 32.182857v104.155429a32.182857 32.182857 0 0 0 64.365714 0v-104.155429a32.182857 32.182857 0 0 0-32.182857-32.182857zM484.790857 536.576a32.182857 32.182857 0 0 0-32.182857 32.182857V672.914286a32.182857 32.182857 0 0 0 64.365714 0v-104.155429a32.182857 32.182857 0 0 0-32.182857-32.182857zM484.790857 758.345143a32.182857 32.182857 0 0 0-32.182857 32.182857v104.155429a32.182857 32.182857 0 0 0 64.365714 0V789.942857a32.182857 32.182857 0 0 0-32.182857-31.597714zM857.234286 654.482286v-1.462857a611.181714 611.181714 0 0 0-102.4-129.316572 5.266286 5.266286 0 0 0-2.048-1.462857l-2.340572-2.048a22.820571 22.820571 0 0 0-16.384-7.021714 24.283429 24.283429 0 0 0-16.384 7.899428l-4.096 4.973715c-4.973714 5.558857-118.784 139.264-112.932571 250.441142a142.774857 142.774857 0 0 0 154.185143 129.316572A142.189714 142.189714 0 0 0 892.050286 760.685714a254.244571 254.244571 0 0 0-34.816-106.203428z m-120.246857-84.845715a629.613714 629.613714 0 0 1 68.754285 85.723429 101.814857 101.814857 0 0 1-58.514285-2.048 172.909714 172.909714 0 0 0-55.296-6.729143h-6.729143a586.605714 586.605714 0 0 1 51.785143-76.946286z m14.043428 292.571429a98.596571 98.596571 0 0 1-107.958857-87.771429 184.027429 184.027429 0 0 1 13.165714-72.265142 102.4 102.4 0 0 1 80.457143-5.558858 137.216 137.216 0 0 0 91.282286-2.048 183.734857 183.734857 0 0 1 20.48 68.169143 98.011429 98.011429 0 0 1-97.426286 98.304z"
                      p-id="72205"
                      fill="#2c2c2c"
                    ></path>
                  </svg>
                </div>
                <div class="card3-label-container">
                  <div class="card3-label-container-top">
                    <div class="card3-label-title">道路积水</div>
                  </div>

                  <div class="card3-label-container-bottom">
                    <div class="card3-label-number">6</div>
                    <div class="card3-label-unit">个</div>
                  </div>
                </div>
              </div>

              <div class="card3-middle-content">
                <div
                  class="card3-svg-container"
                  @click="handleCard3Click('管道液位')"
                >
                  <svg
                    t="1760433461231"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="3620"
                    width="200"
                    height="200"
                  >
                    <path
                      d="M1017.093953 706.48062a72.156279 72.156279 0 0 1-11.668837 20.32124 37.546667 37.546667 0 0 1-29.211783 11.430698h-230.20155A35.324031 35.324031 0 0 1 710.449612 714.974264a36.117829 36.117829 0 0 1 8.731783-40.801241c5.874109-5.794729 17.542946-8.731783 26.354109-14.526511V525.653333c0-34.927132-20.48-55.565891-55.565892-55.565891H596.698295c-2.937054 0-8.811163 0-8.811163 5.794729-5.794729 23.258295-20.40062 34.927132-40.88062 31.751938A38.816744 38.816744 0 0 1 512 467.467907V240.362171c0-17.463566 5.874109-31.751938 23.337674-37.864187 23.813953-11.668837 49.691783 2.937054 55.565892 29.132404v5.794728h11.589457c40.88062 0 78.824186-2.857674 119.704806 2.937055 93.430078 8.731783 163.522481 52.390698 216.071938 130.976744 31.751938 46.595969 43.817674 101.923721 43.817675 157.251473V668.378295c20.40062 0 31.751938 14.526512 37.943566 29.053023-2.937054-2.857674-2.937054 2.937054-2.937055 9.049302zM279.020155 0c17.384186 5.794729 28.973643 14.526512 31.751938 34.847752s-8.731783 40.642481-37.705426 43.500155V182.573643c0 34.847752 20.32124 52.231938 52.152558 52.231938h60.804961c2.937054-17.384186 8.731783-28.973643 26.036589-34.847752a36.197209 36.197209 0 0 1 49.294884 26.195349c0 2.857674 2.857674 8.652403 2.857674 11.589458v229.645891c0 23.258295-14.447132 37.705426-37.626046 40.642481a35.324031 35.324031 0 0 1-37.626047-29.053024 10.47814 10.47814 0 0 0-2.937054-8.652403h-75.093333a275.844961 275.844961 0 0 1-263.541086-211.944186c-2.857674-31.751938-2.857674-55.168992-5.794728-81.284961v-92.874418c0-5.874109 0-8.731783-8.652403-8.731783A38.578605 38.578605 0 0 1 3.968992 52.231938c2.857674-2.857674 0-2.857674 0-5.794729V31.751938a48.421705 48.421705 0 0 1 34.768372-31.751938zM948.589147 944.620155a79.379845 79.379845 0 0 1-158.75969 0c0-43.817674 79.379845-158.75969 79.379845-158.75969s79.379845 114.942016 79.379845 158.75969z"
                      p-id="3621"
                      fill="#515151"
                    ></path>
                  </svg>
                </div>
                <div class="card3-label-container">
                  <div class="card3-label-container-top">
                    <div class="card3-label-title">管道液位</div>
                  </div>

                  <div class="card3-label-container-bottom">
                    <div class="card3-label-number">7</div>
                    <div class="card3-label-unit">个</div>
                  </div>
                </div>
              </div>

              <div class="card3-right-content">
                <div
                  class="card3-svg-container"
                  @click="handleCard3Click('河道监测')"
                >
                  <svg
                    t="1760433541633"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="5042"
                    width="200"
                    height="200"
                  >
                    <path
                      d="M42.666667 213.290667C42.666667 142.634667 102.784 85.333333 176.896 85.333333h670.208C921.173333 85.333333 981.333333 142.634667 981.333333 213.290667v426.026666c0 70.698667-60.117333 128-134.229333 128H176.896c-74.112 0-134.229333-57.301333-134.229333-128V213.333333z m364.288 161.28c-192.810667 52.821333-113.450667 261.930667-113.450667 261.930666s1.450667 4.096 4.821333 10.794667H746.666667c-8.106667-69.973333-111.616-129.450667-190.08-161.28-74.922667-30.293333-126.976-51.370667-51.157334-78.72 117.034667-42.154667 37.674667-89.6 25.088-95.274667-29.866667-13.354667-42.368-35.498667-11.605333-43.434666 9.173333-1.450667 9.258667-5.248 7.637333-5.248-33.706667 0.256-71.722667 14.805333-29.226666 41.386666 22.058667 13.738667 39.808 34.176-90.368 69.845334zM873.984 937.173333A42.666667 42.666667 0 0 0 862.72 853.333333H160a42.666667 42.666667 0 1 0 0 85.333334h704c3.456 0 6.826667-0.512 9.984-1.493334z"
                      p-id="5043"
                      fill="#515151"
                    ></path>
                  </svg>
                </div>
                <div class="card3-label-container">
                  <div class="card3-label-container-top">
                    <div class="card3-label-title">河道监测</div>
                  </div>

                  <div class="card3-label-container-bottom">
                    <div class="card3-label-number">1</div>
                    <div class="card3-label-unit">个</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 积水点监测 -->
          <div class="card card-4">
            <div class="card-header card2-header">
              <div class="card2-header-left">
                <svg
                  t="1759140862845"
                  class="card-header-icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="31836"
                  width="14"
                  height="12"
                >
                  <path
                    d="M0 355.388235h355.388235V0H0v355.388235zM668.611765 0v355.388235H1024V0H668.611765zM0 1024h355.388235V668.611765H0V1024z m668.611765 0H1024V668.611765H668.611765V1024z"
                    fill="#1ebdd0"
                    p-id="31837"
                  ></path>
                </svg>
                <button class="card2-title-button" @click="onWaterLoggingClick">
                  积水点监测
                </button>
              </div>

              <div class="card2-header-right">
                <button
                  class="card2-close-button"
                  @click="onCloseCard4"
                  v-show="isMoniCard4CloseButtonVisible"
                >
                  ✕
                </button>
              </div>
            </div>
            <div class="card4-content">
              <div class="card4-top-content">
                <div class="card4-top-svg-container">
                  <svg
                    t="1759980938313"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="6849"
                    data-spm-anchor-id="a313x.search_index.0.i16.78e83a81pS2hqz"
                    width="20"
                    height="20"
                  >
                    <path
                      d="M513.29 962.25c-49.69 0-97.91-9.74-143.32-28.95-43.85-18.54-83.22-45.09-117.02-78.89s-60.34-73.17-78.89-117.02c-19.21-45.41-28.95-93.63-28.95-143.32 0-67.38 18.94-137.04 56.29-207.05 29.21-54.74 69.74-109.89 120.47-163.89 85.64-91.16 170.24-147.38 173.8-149.73a31.98 31.98 0 0 1 35.25 0c3.56 2.35 88.16 58.58 173.79 149.74 50.73 54.01 91.26 109.15 120.47 163.89 37.35 70.01 56.29 139.67 56.29 207.05 0 49.69-9.74 97.91-28.95 143.32-18.54 43.85-45.09 83.22-78.89 117.02s-73.17 60.34-117.02 78.89c-45.41 19.2-93.63 28.94-143.32 28.94z m0-823.01c-28.52 20.79-87.47 66.54-145.68 128.69-72.3 77.2-158.49 196.45-158.49 326.15 0 167.72 136.45 304.17 304.17 304.17 167.72 0 304.17-136.45 304.17-304.17 0-129.7-86.19-248.95-158.49-326.15-58.2-62.15-117.15-107.89-145.68-128.69z"
                      fill="#2c2c2c"
                      p-id="6850"
                    ></path>
                    <path
                      d="M514.73 827.23c0.01-0.32 0.02-0.63 0.04-0.95 0.52-13.83 10.03-25.64 23.39-29.21 19.51-5.22 49.48-18.12 81.3-49.94 31.92-31.92 44.93-62.1 50.22-81.75 3.62-13.43 15.54-22.93 29.44-23.37l0.95-0.03c21.09-0.67 36.92 19.19 31.45 39.57-0.81 3.03-1.74 6.2-2.79 9.49-11.51 35.93-33.65 70.98-64.01 101.35-30.39 30.39-65.39 52.46-101.23 63.84-3.38 1.07-6.8 2.01-10.2 2.83-20.17 4.84-39.35-11.11-38.56-31.83z"
                      fill="#2c2c2c"
                      p-id="6851"
                    ></path>
                  </svg>
                </div>

                <div class="card4-top-text-background">
                  <span class="card4-top-text1">积水点总数</span>
                  <span class="card4-top-text2">60</span>
                  <span class="card4-top-text3">个</span>
                </div>
              </div>

              <div class="card4-excel-container">
                <table class="excel-table">
                  <thead>
                    <tr>
                      <th>积水点</th>
                      <th>监测时间</th>
                      <th>水位(mm)</th>
                      <th>积水点类型</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      @click="
                        handleRowClick(0, {
                          name: '华新',
                          type: '道路',
                          location: [
                            120.98035872737049, 31.357608642755856,
                            8.097580358203764,
                          ],
                          rotation: { pitch: 0, yaw: -28.84288215637207 },
                        })
                      "
                    >
                      <td>华新</td>
                      <td>06-01 14:54</td>
                      <td>0</td>
                      <td>道路</td>
                    </tr>
                    <tr
                      @click="
                        handleRowClick(1, {
                          name: '徐泾',
                          type: '道路',
                          location: [
                            120.93878115747329, 31.40277965289945,
                            19.263051030094488,
                          ],
                          rotation: {
                            pitch: -8.587991714477539,
                            yaw: -122.85664367675781,
                          },
                        })
                      "
                    >
                      <td>徐泾</td>
                      <td>06-01 14:54</td>
                      <td>12</td>
                      <td>道路</td>
                    </tr>
                    <tr
                      @click="
                        handleRowClick(2, {
                          name: '青浦',
                          type: '道路',
                          location: [
                            120.9543526740766, 31.3668730376697,
                            8.884924935071846,
                          ],
                          rotation: {
                            pitch: -4.369429111480713,
                            yaw: 53.083290100097656,
                          },
                        })
                      "
                    >
                      <td>青浦</td>
                      <td>06-01 14:54</td>
                      <td>24</td>
                      <td>道路</td>
                    </tr>
                    <tr
                      @click="
                        handleRowClick(3, {
                          name: '秦家角',
                          type: '下立交',
                          location: [
                            120.99089207942629, 31.395743377701173,
                            14.217000251301368,
                          ],
                          rotation: {
                            pitch: -11.87403678894043,
                            yaw: 175.11178588867188,
                          },
                        })
                      "
                    >
                      <td>秦家角</td>
                      <td>06-02 14:54</td>
                      <td>36</td>
                      <td>下立交</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 河道监测可拖动弹窗 -->
      <div
        v-if="isRiverMoniPopupVisible"
        class="river-moni-draggable-popup"
        :style="{
          top: riverMoniPosition.y + 'px',
          left: riverMoniPosition.x + 'px',
        }"
        @mousedown="startRiverMoniDrag"
        ref="riverMoniPopupRef"
      >
        <div class="popup-header">
          河道监测
          <button class="close-btn" @click="closeRiverMoniPopup">✕</button>
        </div>

        <div class="popup-body">
          <!-- 第一行：当前河道水位值 -->
          <div class="river-level-row">
            <label class="river-level-label">当前河道水位值：</label>
            <span class="river-level-value">{{ displayedRiverLevel }}</span>
          </div>

          <!-- 第二行：修改河道水位 -->
          <div class="river-level-modify-row">
            <label class="river-level-modify-label">修改河道水位：</label>
            <el-input-number
              v-model="riverLevel"
              :min="-30"
              :max="30"
              step="0.1"
              size="small"
              class="river-level-input"
            />
          </div>

          <!-- 第三行：操作按钮 -->
          <div class="button-row">
            <el-button
              type="primary"
              size="small"
              @click="updateRiverLevel"
              class="action-button"
            >
              <svg
                t="1760585811887"
                class="icon dispatch-icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="95794"
                width="30"
                height="30"
              >
                <path
                  d="M724.3 553.9L583.2 681c-23.3 23.3-61.5 23.3-84.9 0V343c23.3-23.3 61.5-23.3 84.9 0l141.1 126.1c23.3 23.3 23.3 61.5 0 84.8z"
                  fill="#ffffff"
                  p-id="95795"
                ></path>
                <path
                  d="M508.3 553.9L367.2 681c-23.3 23.3-61.5 23.3-84.9 0V343c23.3-23.3 61.5-23.3 84.9 0l141.1 126.1c23.3 23.3 23.3 61.5 0 84.8z"
                  fill="#ffffff"
                  p-id="95796"
                ></path>
              </svg>
            </el-button>
            <el-button
              type="warning"
              size="small"
              @click="resetRiverLevel"
              class="action-button"
            >
              <svg
                t="1763461177116"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="27116"
                width="15"
                height="15"
              >
                <path
                  d="M944.5 376.6c3.6-8.7 5.7-18.1 6.1-27.9 0-1.1 0-2.1 0.1-3.2v-1l-1.7-184c-0.4-45.3-37.3-81.8-82.5-81.8h-0.8c-41 0.4-74.7 30.5-80.8 69.8-9.8-7.1-19.9-13.8-30.3-20.1-102.5-62.1-223.1-80.6-339.5-52C298.8 104.8 200.5 177 138.4 279.5S57.8 502.6 86.4 619s100.7 214.7 203.2 276.8c71 43 150.7 65.1 231.7 65.1 35.9 0 72-4.3 107.8-13.1C745.5 919.2 843.8 847 905.9 744.5c23.6-39 11.2-89.8-27.8-113.4-39-23.6-89.8-11.2-113.4 27.8-81 133.7-255.7 176.6-389.5 95.6-64.8-39.2-110.4-101.4-128.5-174.9-18.1-73.6-6.4-149.7 32.9-214.5 80.1-132.1 251.6-175.6 384.7-98.4-36.3 9-63.1 41.9-62.7 80.9 0.4 45.3 37.3 81.8 82.5 81.8h0.8l184-1.7c31.3-0.3 58.5-18 72.2-43.9 1.2-2.2 2.2-4.5 3.2-6.8 0.1-0.1 0.2-0.3 0.2-0.4z"
                  fill="#ffffff"
                  p-id="27117"
                ></path>
              </svg>
            </el-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from "vue";

// 定义 props，用于接收父组件传递的按钮显示状态
const props = defineProps({
  isMoniCard2CloseButtonVisible: {
    type: Boolean,
    default: false,
  },
  isMoniCard3CloseButtonVisible: {
    type: Boolean,
    default: false,
  },
  isMoniCard4CloseButtonVisible: {
    type: Boolean,
    default: false,
  },
});

// 定义事件，用于向父组件发送 create-poi 事件和更新按钮显示状态
const emit = defineEmits<{
  (e: "create-poi"): void;
  (e: "delete-poi"): void;
  (e: "create-equal-rain"): void;
  (e: "create-water-logging"): void;
  (e: "delete-water-logging"): void;
  (e: "water-logging-row-click", data: any): void;
  (e: "pipeline-level-click"): void;
  (e: "delete-pipe-liquidlevel"): void;
  (e: "river-level-moni-clicked"): void;
  (e: "river-level-updated", value: number): void;
  (e: "update:isMoniCard2CloseButtonVisible", value: boolean): void;
  (e: "update:isMoniCard3CloseButtonVisible", value: boolean): void;
  (e: "update:isMoniCard4CloseButtonVisible", value: boolean): void;
}>();

const rainContainer = ref<HTMLElement | null>(null);
const numDrops = 12;

// 河道监测弹窗相关数据
const isRiverMoniPopupVisible = ref(false);
const riverLevel = ref(0); // 输入框的值
const displayedRiverLevel = ref(1.1); // 显示的水位值，默认为0+1=1
const riverMoniPosition = ref({ x: 1200, y: 500 }); // 默认位置
const isRiverMoniDragging = ref(false);
const riverMoniOffset = ref({ x: 0, y: 0 });
const riverMoniPopupRef = ref<HTMLElement | null>(null);
const riverMoniVelocity = ref({ x: 0, y: 0 }); // 用于跟踪拖动速度
const riverMoniLastPosition = ref({ x: 0, y: 0 }); // 用于计算速度
const riverMoniLastTime = ref(0); // 用于计算时间差

// 手动边界配置（可以根据需要自定义这些值）
const RIVER_MONI_BOUNDARIES = {
  minX: 370, // 弹窗左边缘的最小X坐标
  maxX: 1540, // 弹窗右边缘的最大X坐标
  minY: 70, // 弹窗上边缘的最小Y坐标
  maxY: 740, // 弹窗下边缘的最大Y坐标
};

// 处理表格行点击事件
const handleRowClick = (rowIndex: number, rowData: any) => {
  // 只有当isMoniCard4CloseButtonVisible为true时才允许点击
  if (!props.isMoniCard4CloseButtonVisible) {
    console.log("积水点监测功能未启用");
    return;
  }

  console.log(`点击了第${rowIndex + 1}行:`, rowData);
  emit("water-logging-row-click", rowData);
};

// 处理card3-svg-container点击事件
const handleCard3Click = (type: string) => {
  console.log(`点击了${type}`);

  if (type === "管道液位") {
    // 显示关闭按钮
    emit("update:isMoniCard3CloseButtonVisible", true);
    emit("pipeline-level-click");
  } else if (type === "河道监测") {
    // 显示河道监测弹窗
    isRiverMoniPopupVisible.value = true;
    // 触发水位更新事件，传递当前水位值
    emit("river-level-moni-clicked");
  }
};

// 河道监测弹窗拖动相关方法
const startRiverMoniDrag = (e: MouseEvent) => {
  if (!riverMoniPopupRef.value) return;
  isRiverMoniDragging.value = true;
  riverMoniOffset.value.x = e.clientX - riverMoniPosition.value.x;
  riverMoniOffset.value.y = e.clientY - riverMoniPosition.value.y;

  // 添加拖动样式
  if (riverMoniPopupRef.value) {
    riverMoniPopupRef.value.classList.add("dragging");
  }

  // 重置速度
  riverMoniVelocity.value.x = 0;
  riverMoniVelocity.value.y = 0;
  riverMoniLastPosition.value.x = riverMoniPosition.value.x;
  riverMoniLastPosition.value.y = riverMoniPosition.value.y;
  riverMoniLastTime.value = Date.now();

  document.addEventListener("mousemove", onRiverMoniDrag);
  document.addEventListener("mouseup", stopRiverMoniDrag);
};

const onRiverMoniDrag = (e: MouseEvent) => {
  if (!isRiverMoniDragging.value) return;

  // 计算当前位置
  let newX = e.clientX - riverMoniOffset.value.x;
  let newY = e.clientY - riverMoniOffset.value.y;

  // 使用手动边界配置
  newX = Math.max(
    RIVER_MONI_BOUNDARIES.minX,
    Math.min(newX, RIVER_MONI_BOUNDARIES.maxX)
  );
  newY = Math.max(
    RIVER_MONI_BOUNDARIES.minY,
    Math.min(newY, RIVER_MONI_BOUNDARIES.maxY)
  );

  // 计算时间差
  const now = Date.now();
  const deltaTime = now - riverMoniLastTime.value;

  if (deltaTime > 0) {
    // 计算速度 (像素/毫秒)
    riverMoniVelocity.value.x =
      (newX - riverMoniLastPosition.value.x) / deltaTime;
    riverMoniVelocity.value.y =
      (newY - riverMoniLastPosition.value.y) / deltaTime;
  }

  // 更新位置和时间
  riverMoniPosition.value.x = newX;
  riverMoniPosition.value.y = newY;
  riverMoniLastPosition.value.x = newX;
  riverMoniLastPosition.value.y = newY;
  riverMoniLastTime.value = now;
};

const stopRiverMoniDrag = () => {
  isRiverMoniDragging.value = false;
  document.removeEventListener("mousemove", onRiverMoniDrag);
  document.removeEventListener("mouseup", stopRiverMoniDrag);

  // 移除拖动样式并添加惯性样式
  if (riverMoniPopupRef.value) {
    riverMoniPopupRef.value.classList.remove("dragging");
    riverMoniPopupRef.value.classList.add("inertia");

    // 在动画结束后移除惯性样式
    setTimeout(() => {
      if (riverMoniPopupRef.value) {
        riverMoniPopupRef.value.classList.remove("inertia");
      }
    }, 300);
  }

  // 启动惯性动画
  riverMoniInertiaAnimation();
};

// 河道监测弹窗惯性动画函数
const riverMoniInertiaAnimation = () => {
  // 初始速度
  let vx = riverMoniVelocity.value.x * 1000; // 转换为像素/秒
  let vy = riverMoniVelocity.value.y * 1000;

  // 物理参数
  const friction = 0.92; // 摩擦系数 (更真实的摩擦力)
  const minVelocity = 0.5; // 最小速度阈值
  const deceleration = 0.98; // 减速度

  // 上一帧时间
  let lastTimestamp = 0;

  // 动画函数
  const animate = (timestamp: number) => {
    if (!lastTimestamp) lastTimestamp = timestamp;
    const deltaTime = Math.min((timestamp - lastTimestamp) / 1000, 0.1); // 转换为秒，最大0.1秒
    lastTimestamp = timestamp;

    // 应用减速度和摩擦力
    vx *= deceleration * friction;
    vy *= deceleration * friction;

    // 计算新位置
    let newX = riverMoniPosition.value.x + vx * deltaTime;
    let newY = riverMoniPosition.value.y + vy * deltaTime;

    // 使用手动边界配置
    newX = Math.max(
      RIVER_MONI_BOUNDARIES.minX,
      Math.min(newX, RIVER_MONI_BOUNDARIES.maxX)
    );
    newY = Math.max(
      RIVER_MONI_BOUNDARIES.minY,
      Math.min(newY, RIVER_MONI_BOUNDARIES.maxY)
    );

    // 如果碰到边界，反转速度方向以产生反弹效果
    if (
      newX <= RIVER_MONI_BOUNDARIES.minX ||
      newX >= RIVER_MONI_BOUNDARIES.maxX
    ) {
      vx = -vx * 0.3; // 反弹并减少速度
    }
    if (
      newY <= RIVER_MONI_BOUNDARIES.minY ||
      newY >= RIVER_MONI_BOUNDARIES.maxY
    ) {
      vy = -vy * 0.3; // 反弹并减少速度
    }

    // 更新位置
    riverMoniPosition.value.x = newX;
    riverMoniPosition.value.y = newY;

    // 如果速度足够大，继续动画
    if (Math.abs(vx) > minVelocity || Math.abs(vy) > minVelocity) {
      requestAnimationFrame(animate);
    }
  };

  // 开始动画
  if (Math.abs(vx) > minVelocity || Math.abs(vy) > minVelocity) {
    requestAnimationFrame(animate);
  }
};

// 河道监测执行方法
const updateRiverLevel = () => {
  // 更新显示的水位值
  displayedRiverLevel.value = 1.1 + riverLevel.value;
  console.log("执行河道监测，当前水位值:", displayedRiverLevel.value);
  // 触发一个事件通知父组件水位已更新
  emit("river-level-updated", riverLevel.value);
};

// 河道监测重置方法
const resetRiverLevel = () => {
  console.log("重置河道监测");
  riverLevel.value = 0; // 重置为默认值
  displayedRiverLevel.value = 1.1; // 重置显示的水位值为1+0=1
};

// 关闭河道监测弹窗
function closeRiverMoniPopup() {
  isRiverMoniPopupVisible.value = false;
}

// 处理创建 POI 的点击事件
function onCreatePoiClick() {
  // 显示关闭按钮
  emit("update:isMoniCard2CloseButtonVisible", true);
  emit("create-poi");
}

function onEqualRainClick() {
  emit("create-equal-rain");
}

// 处理积水点监测按钮的点击事件
function onWaterLoggingClick() {
  // 显示关闭按钮
  emit("update:isMoniCard4CloseButtonVisible", true);
  emit("create-water-logging");
}

// 处理关闭按钮的点击事件
function onCloseCard2() {
  // 隐藏关闭按钮
  emit("update:isMoniCard2CloseButtonVisible", false);
  emit("delete-poi");
}

// 处理card3关闭按钮的点击事件
function onCloseCard3() {
  // 隐藏关闭按钮
  emit("update:isMoniCard3CloseButtonVisible", false);
  emit("delete-pipe-liquidlevel");
}

// 处理card4关闭按钮的点击事件
function onCloseCard4() {
  // 隐藏关闭按钮
  emit("update:isMoniCard4CloseButtonVisible", false);
  emit("delete-water-logging");
}

onMounted(() => {
  // 添加调试日志
  console.log("onMounted executed");
  console.log("rainContainer value:", rainContainer.value);

  if (rainContainer.value) {
    console.log("Creating rain drops...");
    for (let i = 0; i < numDrops; i++) {
      const drop = document.createElement("div");
      drop.classList.add("drop");

      // 设置随机位置和动画参数
      drop.style.left = Math.random() * 98 + "%";
      // 调整下落速度：使雨滴下落更流畅
      drop.style.animationDuration = 0.8 + Math.random() * 1.2 + "s";
      // 调整下落频率：使雨滴出现更自然
      drop.style.animationDelay = Math.random() * 1.5 + "s";

      rainContainer.value.appendChild(drop);
    }
    console.log("Rain drops created");
  } else {
    console.log("rainContainer is null, cannot create rain drops");
  }
});
</script>

<style scoped>
/* 如果需要覆盖或添加特定样式，可以在下面添加 */
.drainage-container {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-size: cover;
}

.top-image {
  width: 100%;
  height: 7vh;
  display: block;
}

.sidebar {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 100%;
  height: 90vh;
  box-sizing: border-box;
}

/* 左侧边栏 */
.sidebar-left {
  width: 18.5vw;
  height: 90vh;
  padding: 12px;
  display: flex;
  flex-direction: column;
  transform: translateY(-1vh);
}
/* 包裹卡片的容器 */
.cards-left-wrapper {
  height: 92vh;
  display: flex;
  flex-direction: column;
}

/* 卡片 */
.card {
  width: 100%;
  flex: 1;
  /* 平分高度 */
  display: flex;
  flex-direction: column;
  border-radius: 11px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  margin-bottom: 12px;
  /* 半透明整体效果 */
  /* 毛玻璃效果，可选 */
  user-select: none;
  pointer-events: auto;
}

.card:last-child {
  margin-bottom: 0;
}

/* 标题栏（半透明深色） */
.card-header {
  background: linear-gradient(
    to right,
    rgba(49, 141, 169, 0.7),
    rgba(79, 99, 113, 0.7)
  );
  /* 渐变背景 */
  color: #fff;
  font-weight: 600;
  padding: 10px;
  text-align: left;
  font-family: "SimHei", Arial, sans-serif;
  text-shadow: 0 0 6px #00bfff;
  /* 海蓝色光效 */
  border: none;
  backdrop-filter: blur(1px);
  position: relative;
  user-select: none;
}

/* card2标题栏左右排列 */
.card2-header {
  display: flex;
  justify-content: space-between;
}

/* 河道监测可拖动弹窗样式 */
.river-moni-draggable-popup {
  position: absolute;
  width: 220px;
  background-color: rgba(79, 99, 113, 0.7);
  border: 2px solid rgba(248, 248, 248, 0.8);
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0, 191, 255, 0.8);
  padding: 16px 20px;
  font-size: 14px;
  z-index: 1000;
  backdrop-filter: blur(6px);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  pointer-events: auto;
  user-select: none;
  cursor: grab;
  animation: popupAppear 0.3s ease-out;
}

.river-moni-draggable-popup:hover {
  box-shadow: 0 5px 20px rgba(0, 191, 255, 1);
}

.river-moni-draggable-popup:active {
  cursor: grabbing;
}

/* 惯性动画期间的样式 */
.river-moni-draggable-popup.inertia {
  transition: transform 0.2s ease, box-shadow 0.22s ease;
}

@keyframes popupAppear {
  from {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  font-size: 16px;
  color: #ffffff;
  text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
  font-family: "SHJGSK";
  margin-bottom: 10px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(248, 248, 248, 0.5);
}

.close-btn {
  background: radial-gradient(
    circle at 30% 30%,
    rgba(5, 50, 66, 0.5),
    rgba(0, 212, 255, 0.5)
  );
  border: 1px solid rgba(248, 248, 248, 0.8);
  border-radius: 50%;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  cursor: pointer;
  color: #ffffff;
  transition: all 0.3s ease;
  box-shadow: 0 0 5px rgba(0, 191, 255, 0.5);
}

.close-btn:hover {
  background: radial-gradient(
    circle at 0% 60%,
    #1a918b 0%,
    #0099c8 60%,
    #00e5ff 100%
  );
  box-shadow: 0 0 10px rgba(0, 255, 255, 1);
  transform: scale(1.1);
}

.popup-body {
  font-family: "YRDZST";
  font-weight: 600;
  color: #ffffff;
  animation: contentFadeIn 0.3s ease-out 0.2s both;
}

/* 河道水位行样式 */
.river-level-row {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
  animation: rowFadeIn 0.3s ease-out 0.3s both;
}

.river-level-label {
  font-size: 14px;
  margin-right: 10px;
  white-space: nowrap;
  flex-shrink: 0;
  color: #ffffff;
}

.river-level-value {
  font-size: 14px;
  color: #ffffff;
}

/* 河道水位修改行样式 */
.river-level-modify-row {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
  animation: rowFadeIn 0.3s ease-out 0.3s both;
}

.river-level-modify-label {
  font-size: 14px;
  margin-right: 10px;
  white-space: nowrap;
  flex-shrink: 0;
  color: #ffffff;
}

.river-level-input {
  flex-grow: 1;
}

.river-level-input::v-deep(.el-input__wrapper) {
  background: rgba(5, 50, 66, 0.5);
  border: 1px solid rgba(204, 166, 166, 0.8);
  border-radius: 6px;
  box-shadow: 0 0 5px rgba(94, 164, 187, 0.5);
}

.river-level-input::v-deep(.el-input__inner) {
  color: #ffffff;
}

.button-row {
  display: flex;
  gap: 10px;
  animation: rowFadeIn 0.3s ease-out 0.4s both;
  align-items: center;
}

.action-button {
  flex: 1;
  font-family: "SHJGSK";
  background-color: rgba(36, 74, 85, 0.7);
  border: 1px solid rgba(170, 151, 151, 0.8);
  border-radius: 6px;
  box-shadow: 0 0 5px rgba(0, 191, 255, 0.5);
  transition: all 0.3s ease;
}

.action-button:hover {
  background: radial-gradient(
    circle at 0% 60%,
    #509e9a 0%,
    #2f8ba7 60%,
    #26757e 100%
  );
  box-shadow: 0 0 10px rgba(0, 255, 255, 1);
}

.action-button:active {
  transform: scale(0.95);
}

@keyframes contentFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes rowFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card2-header-left {
  display: flex;
  align-items: center;
}

.card2-header-right {
  display: flex;
  align-items: center;
}

/* 等雨量图按钮样式 */
.isoline-button {
  background: linear-gradient(
    to right,
    rgba(49, 141, 169, 0.7) 0%,
    rgba(79, 99, 113, 0.7) 33%,
    rgba(45, 198, 245, 0.7) 66%,
    rgba(39, 77, 104, 0.7) 100%
  );
  background-size: 200% 100%;
  background-position: 0% 0%;
  color: #dcd9ff;
  font-weight: 600;
  font-family: "SimHei", Arial, sans-serif;
  text-shadow: 0 0 6px #00bfff;
  border: none;
  border-radius: 4px;
  padding: 4px 10px;
  cursor: pointer;
  backdrop-filter: blur(1px);
  font-size: 14px;
  transition: all 0.3s ease;
}

.isoline-button:hover {
  background-position: 90% 0%;
  transform: scale(1.02);
}

.card2-title-button {
  background: linear-gradient(
    to right,
    rgba(49, 141, 169, 0.7) 0%,
    rgba(79, 99, 113, 0.7) 33%,
    rgba(45, 198, 245, 0.7) 66%,
    rgba(39, 77, 104, 0.7) 100%
  );
  background-size: 200% 100%;
  background-position: 0% 0%;
  color: #dcd9ff;
  font-weight: 600;
  font-family: "SimHei", Arial, sans-serif;
  text-shadow: 0 0 6px #00bfff;
  border: none;
  border-radius: 4px;
  padding: 4px 10px;
  cursor: pointer;
  backdrop-filter: blur(1px);
  font-size: 15px;
  transition: all 0.3s ease;
}
.card2-title-button:hover {
  background-position: -100% 0%;
  transform: scale(1.01);
}

/* 关闭按钮样式 */
.card2-close-button {
  background: linear-gradient(
    to right,
    rgba(169, 49, 49, 0.7) 0%,
    rgba(113, 79, 79, 0.7) 33%,
    rgba(245, 45, 45, 0.7) 66%,
    rgba(104, 39, 39, 0.7) 100%
  );
  background-size: 200% 100%;
  background-position: 0% 0%;
  color: #ffd9dc;
  font-weight: 600;
  font-family: "SimHei", Arial, sans-serif;
  text-shadow: 0 0 6px #ff4d4d;
  border: none;
  border-radius: 4px;
  padding: 4px 10px;
  cursor: pointer;
  backdrop-filter: blur(1px);
  font-size: 15px;
  transition: all 0.3s ease;
  margin-left: auto;
}

.card2-close-button:hover {
  background-position: -100% 0%;
  transform: scale(1.01);
}

.card-header-icon {
  margin-right: 3px;
  margin-left: 3px;
  filter: drop-shadow(0 0 6px #00bfff);
}

.water-monitoring-icon {
  margin-right: 9px;
}

.card1-content {
  display: flex;
  justify-content: space-between;
}

/* 内容栏（浅色半透明） */
.card1-content,
.card2-content,
.card3-content,
.card4-content {
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: #000;
  background-color: rgba(79, 99, 113, 0.7);
  backdrop-filter: blur(3px);
}

.card1-content-left {
  margin-left: -10px;
}

.card1-content-left,
.card1-content-right {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
}

.card1-content-left {
  font-size: 15px;
  font-weight: 600;
  font-family: "SimHei", Arial, sans-serif;
  color: #faf4f4;
  text-shadow: #58f0f0 0 0 1px;
}

.card1-content-left {
  font-size: 20px;
  font-weight: bold;
  font-family: Microsoft Yahei;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
}

.card1-content-left {
  font-size: 15px;
  font-weight: bold;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
}

.card-1 {
  height: 18vh;
  /* 第一个卡片的高度 */
  flex: none;
}

.card-2 {
  height: 20.4vh;
  /* 第二个卡片的高度 */
  flex: none;
}

.card-3 {
  height: 15.4vh;
  /* 第三个卡片的高度 */
  flex: none;
}

/* card3-content 内部的 left, middle, right 容器等间距排列 */
.card3-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* card3-left-content, card3-middle-content, card3-right-content 等间距排列 */
.card3-left-content,
.card3-middle-content,
.card3-right-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
}

/* card3-svg-container 添加圆形背景颜色，内部svg上下左右居中排列 */
.card3-svg-container,
.card3-svg-container1 {
  background-color: #7dbcdf;
  /* 圆形背景颜色 */
  border-radius: 50%;
  /* 圆形 */
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  margin-bottom: 8px;
}

.card3-svg-container svg {
  width: 26px;
  height: 26px;
}

.card3-svg-container1 svg {
  width: 26px;
  height: 26px;
}

.card3-svg-container1:hover {
  background-color: #c4ecb2;
  transform: scale(1.1);
  transition: all 0.3s ease;
  box-shadow: 0 0 10px rgba(26, 218, 106, 0.5);
}

.card3-svg-container:hover {
  background-color: #c4ecb2;
  cursor: pointer;
  transform: scale(1.1);
  transition: all 0.3s ease;
  box-shadow: 0 0 10px rgba(26, 218, 106, 0.5);
}

/* card3-label-container 上下排列 */
.card3-label-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* card3-label-container-top 和 card3-label-container-bottom 上下排列 */
.card3-label-container-top,
.card3-label-container-bottom {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
}

/* container-bottom 中 label number 和 label unit 左右排列 */
.card3-label-container-bottom {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4px;
}

.card3-label-number,
.card3-label-unit {
  font-size: 14px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
  font-family: "SHJGSK";
}

.card3-label-title {
  font-size: 19px;
  font-family: "YSBTHeiTi", Arial, sans-serif;
  color: #ffffff;
  text-shadow: #9257f0 0 0 5px;
}

.card-4 {
  height: 15vh;
}

.card-6 {
  height: 72.5vh;
  /* 第三个卡片的高度 */
  flex: none;
}

.card1-icon-text-wrapper {
  display: flex;
  align-items: center;
}

.card1-icon-text-wrapper img {
  margin-right: 8px;
}

.icon-wrapper-card1 {
  display: flex;
  flex-direction: column;
  /* 设置为上下排列 */
  align-items: center;
  justify-content: center;
  margin-right: 10px;
}

/* 对比条容器 */
.card1-comparison-bar {
  display: flex;
  width: 10vw;
  height: 8px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* 雨水管网部分 */
.card1-rainwater-bar {
  background-color: #00bfff;
  /* 海蓝色 */
}

/* 污水管网部分 */
.card1-sewage-bar {
  background-color: #e64444;
  /* 粉红色 */
}

/* 对比条上方文字 */
.card1-comparison-bar-text {
  display: flex;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 4px;
}

.card1-content-right .card1-tn-wrapper-number1 {
  font-size: 16px;
  font-weight: bold;
  font-family: Microsoft Yahei;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
}

.card1-content-right .card1-tn-wrapper-text1 {
  font-size: 11px;
  font-weight: bold;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
}

.card1-content-right .card1-tn-wrapper-number2 {
  font-size: 16px;
  font-weight: bold;
  font-family: Microsoft Yahei;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
}

.card1-content-right .card1-tn-wrapper-text2 {
  font-size: 11px;
  font-weight: bold;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
}

/* 对比条下方文字 */
.card1-comparison-bar-labels {
  display: flex;
  justify-content: space-between;
  width: 90%;
  margin-top: 4px;
  font-size: 12px;
  color: #333;
}

.card1-rainwater-label {
  font-size: 15px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
  text-align: left;
}

.card1-sewage-label {
  font-size: 15px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
  text-align: right;
}

.card1-row2-multi-wrapper {
  display: flex;
  justify-content: space-between;
  /* 等间距排列 */
  align-items: center;
  /* 垂直居中对齐 */
  width: 100%;
  /* 确保占满容器宽度 */
}

.card1-row2-single-wrapper {
  display: flex;
  flex-direction: column;
  /* 保持内部内容上下排列 */
  align-items: center;
  /* 居中对齐 */
  flex: 1;
  /* 让每个子项占据相等的空间 */
}

.card1-icon3 {
  z-index: -1;
  margin-top: -10px;
  width: 70px;
  height: 30px;
}

.card1-row2-label {
  font-size: 15px;
  font-weight: 600;
  color: #d9ddf5;
  text-shadow: #000 0 0 3px;
  margin-bottom: 4px;
}

.card1-row2-single-wrapper .card1-tn-wrapper-number2 {
  font-size: 16px;
  font-weight: bold;
  font-family: Microsoft Yahei;
  color: #ffffff;
  text-shadow: #9ba9f7 0 0 8px;
}

.card1-row2-single-wrapper .card1-tn-wrapper-text2 {
  font-size: 11px;
  font-weight: bold;
  color: #7eb2ee;
  text-shadow: #566fff 0 0 8px;
}

/* card2-left 和 card2-right 左右排列 */
.card2-content {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 60px;
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: #000;
  background-color: rgba(79, 99, 113, 0.7);
  backdrop-filter: blur(3px);
}

/* card2-left-content 内部的三个元素垂直排列，等间距 */
.card2-left-content,
.card2-right-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 90%;
}

.card2-left-content {
  padding-right: 10px;
}

.card2-right-svg-container {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* card2-left-label-wrapper 内部的 text 和 number 水平排列 */
.card2-left-label-wrapper,
.card2-right-label-wrapper {
  display: flex;
  flex-direction: column;
  /* 垂直排列 */
  justify-content: center;
  /* 垂直居中 */
  align-items: center;
  /* 水平左对齐 */
  gap: 5px;
  /* 控制 text 和 number 之间的间距 */
  width: 100%;
  /* 占满父容器宽度 */
}

.card2-left-label-wrapper {
  padding-top: 10px;
  margin-top: -30px;
}

.card2-right-label-wrapper {
  padding-top: 12px;
}

.card2-left-label-text1,
.card2-right-label-text1 {
  font-size: 15px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
}

.card2-left-label-number1,
.card2-right-label-number1 {
  font-size: 18px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
}

.card2-left-label-text2,
.card2-right-label-text2 {
  font-size: 16px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
  font-family: "SHJGSK";
}

.card2-left-label-number2,
.card2-right-label-number2 {
  font-size: 13px;
  font-weight: 600;
  color: #faf4f4;
  text-shadow: #000 0 0 5px;
}

.card2-right-chart,
.card2-left-chart {
  margin-top: -20px;
  margin-bottom: -15px;
  width: 100%;
  height: 58%;
}

.card4-top-content {
  display: flex;
  align-items: center;
  /* 垂直居中对齐 */
  margin-top: 5px;
  margin-left: 5px;
}

.card4-top-svg-container {
  background-color: #7dbcdf;
  /* 圆形背景颜色 */
  border-radius: 50%;
  /* 圆形 */
  padding: 0px;
  margin-right: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  z-index: 999;
}

.card4-top-svg-container svg {
  width: 25px;
  height: 25px;
}

.card4-top-text-background {
  flex: 1;
  background: linear-gradient(
    to right,
    rgba(62, 202, 185, 0.9),
    rgba(55, 93, 96, 0.3)
  );
  /* 渐变背景 */
  border-radius: 8px;
  padding: 6px 15px;
  display: flex;
  justify-content: space-between;
  /* 左右两端对齐 */
  align-items: center;
  margin-left: -40px;
  padding-left: 33px;
  width: calc(100% + 30px);
  height: 20px;
}

.card4-top-text1 {
  font-size: 18px;
  font-family: "YSBTHeiTi", sans-serif;
  color: #ffffff;
  text-shadow: #9257f0 0 0 5px;
}

.card4-top-text2 {
  font-size: 22px;
  font-weight: bold;
  color: #ffffff;
  text-shadow: #566fff 0 0 8px;
  margin-left: 90px;
}

.card4-top-text3 {
  font-size: 15px;
  font-weight: bold;
  color: #7eb2ee;
  text-shadow: #566fff 0 0 8px;
  margin-left: 5px;
}

.card4-item-title-container {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 12px;
}

.card4-item-title-container img {
  width: 20px;
  height: auto;
}

.card4-item-title-container span {
  font-size: 18px;
  font-family: "YSBTHeiTi", sans-serif;
  color: #ffffff;
}

@font-face {
  font-family: "YSBTHeiTi";
  src: url("@/assets/fonts/YouSheBiaoTiHei-2.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

.card4-item-text-background {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  background: linear-gradient(
    to right,
    rgba(200, 196, 250, 0.3),
    rgba(175, 166, 223, 0.4)
  );
  border-radius: 6px;
  position: relative;
  /* 为左侧矩形定位 */
  gap: 5px;
}

.card4-item-text-background::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0%;
  bottom: 0%;
  width: 6px;
  background-color: #00ffff;
}

.card4-item-content-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-left: 12px;
  margin-right: 12px;
}

.card4-item-content-text1 {
  font-size: 14px;
  font-weight: bold;
  color: #ffffff;
}

.card4-item-content-text2 {
  font-size: 19px;
  font-weight: bold;
  color: #fff;
  margin-left: 8px;
}

.card4-item-content-text3 {
  font-size: 14px;
  margin-left: 4px;
  color: #fff;
}

@font-face {
  font-family: "number-font";
  src: url("@/assets/fonts/number.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

.chart-wrapper {
  flex: 8;
  position: relative;
  overflow: hidden;
}

.legend-wrapper {
  flex: 2;
  padding: 10px 15px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.legend-item {
  display: flex;
  align-items: center;
  width: 45%;
  margin: 4px 2.5%;
  padding: 0 10px;
  box-sizing: border-box;
  justify-content: center;
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 2px;
  margin-right: 8px;
}

.legend-text {
  font-size: 13px;
  color: #ffffff;
  white-space: nowrap;
  font-family: Arial, sans-serif;
  font-weight: bold;
}

.chart-iframe {
  width: 100%;
  height: 100%;
  border: none;
  position: absolute;
  top: 0;
  left: 0;
}

.card1-content-text {
  font-size: 18.5px;
  font-family: SimHei;
  font-weight: bold;
  color: #ffffff;
  margin-top: 1px;
  text-shadow: #c52727 0 0 8px;
}

.card1-content-left-svg-container {
  height: 85px;
}

.card1-content-right-svg-container {
  height: 85px;
}

.card2-rain-card-container {
  position: relative;
  height: 120px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.cloud {
  width: 70px;
  height: 80px;
  z-index: 1;
}

.card2-rain-container {
  position: relative;
  width: 60px;
  height: 23px; /* 精准控制雨滴区域 */
  overflow: hidden;
  margin-top: -25px; /* 云朵重叠效果 */
}

.card2-rain {
  position: absolute;
  width: 100%;
  height: 100%;
}

::v-deep(.drop) {
  position: absolute;
  width: 3px;
  height: 8px;
  border-radius: 50%;
  background: rgba(0, 191, 255, 0.7); /* 使用页面中的#00bfff海蓝色 */
  animation: fall linear infinite;
  bottom: 100%;
  box-shadow: 0 0 2px 1px rgba(94, 189, 224, 0.5); /* 使用更柔和的蓝色发光效果 */
}

@keyframes fall {
  0% {
    transform: translateY(0) scaleY(1);
    opacity: 0.7;
  }
  90% {
    transform: translateY(54px) scaleY(1.2);
    opacity: 0.9;
  }
  100% {
    transform: translateY(60px) scaleY(1.3);
    opacity: 0;
  }
}

.card4-excel-container {
  margin-top: 6px;
  padding: 2px;
  /* 为表格与卡片边缘添加适当的间距 */
}

.excel-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 14px;
  color: #fff;
  text-align: center;
  margin-top: 12px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 0 8px rgba(0, 191, 255, 0.3);
}

.excel-table thead {
  background: rgba(0, 180, 200, 0.5);
  /* 表头蓝绿色渐变 */
}

.excel-table th,
.excel-table td {
  padding: 11px 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  font-family: "SHJGSK";
}

.excel-table tbody tr:nth-child(even) {
  background: rgba(255, 255, 255, 0.15);
  /* 隔行变色 */
}

.excel-table tbody tr:hover {
  background: rgba(4, 209, 231, 0.8);
  cursor: pointer;
  transition: background 0.3s ease;
  box-shadow: 0 0 10px rgba(99, 55, 202, 0.5);
}

.header {
  position: relative;
  text-align: center;
  height: 7vh;
}

.header-text {
  position: absolute;
  top: 37%;
  left: 50.3%;
  transform: translate(-50%, -50%);
  font-size: 39px;
  color: white;
  text-align: center;
  z-index: 10;
  text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
  font-family: "YSBTHeiTi", sans-serif;
  white-space: nowrap;
  letter-spacing: 5px;
}

/* 新增的顶部菜单容器样式 */
.top-menu-container {
  position: absolute;
  top: 80%;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 800px;
  z-index: 100;
}

.top-menu-icon-container {
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 10px 0;
  border-radius: 10px 10px 0 0;
}

.top-menu-icon-item-container {
  position: relative;
  display: flex;
  align-items: center;
}

.top-menu-icon-item {
  width: 60px;
  height: 60px;
  background: radial-gradient(circle at 30% 30%, #053242, #00d4ff);

  border: 2px solid rgba(248, 248, 248, 0.8);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.5s ease;
  box-shadow: 0 0 15px rgba(0, 191, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 1;
}

.top-menu-icon-item:hover {
  background: radial-gradient(
    circle at 0% 60%,
    #1a918b 0%,
    #0099c8 60%,
    #00e5ff 100%
  );
  border: 2px solid rgba(248, 248, 248, 0.6);
  box-shadow: inset 3px 3px 8px rgba(255, 255, 255, 0.4),
    inset -4px -4px 10px rgba(0, 0, 0, 0.7), 0 0 10px rgba(0, 255, 255, 0.4);
  transform: scale(1.15);
  animation: pulseGlow 1s ease-in-out infinite alternate;
}

@keyframes pulseGlow {
  from {
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
  }
  to {
    box-shadow: 0 0 25px rgba(0, 255, 255, 1);
  }
}

.top-menu-scalebar-container {
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  padding: 10px;
  border-radius: 0 0 10px 10px;
}

.scalebar-item {
  width: 4px;
  background-color: rgba(7, 74, 97, 0.7);
  border-radius: 2px;
}

.scalebar-item.short {
  height: 10px;
}

.scalebar-item.tall {
  height: 20px;
  background-color: rgba(7, 74, 97, 0.7);
}

.top-menu-icon-label {
  height: 40px;
  border-radius: 0 20px 20px 0;
  background: radial-gradient(
    circle at 30% 30%,
    rgba(5, 50, 66, 0.5),
    rgba(0, 212, 255, 0.5)
  );
  border: 1px solid rgba(248, 248, 248, 0.8);
  box-shadow: 0 0 15px rgba(0, 191, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 15px;
  color: #ffffff;
  font-size: 18px;
  font-family: "SHJGSK";
  font-weight: bold;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.3s ease;
  position: absolute;
  left: 90%;
  top: 50%;
  transform: translateY(-50%);
}

.top-menu-icon-item:hover + .top-menu-icon-label {
  opacity: 1;
}

:deep(.river-level-input .el-input__wrapper) {
  background: linear-gradient(
    to bottom,
    rgba(49, 141, 169, 0.7),
    rgba(79, 99, 113, 0.7)
  );
  border: 1px solid #2d687c;
}

:deep(.river-level-input .el-input-number__increase:hover),
:deep(.river-level-input .el-input-number__decrease:hover) {
  background-color: #005f8a;
}

:deep(.river-level-input .el-input-number__increase),
:deep(.river-level-input .el-input-number__decrease) {
  width: 22px;
  background: linear-gradient(
    to bottom,
    rgba(49, 141, 169, 0.7),
    rgba(79, 99, 113, 0.7)
  );
  color: white;
  border: 1px solid #aaa4a4;
}


</style>